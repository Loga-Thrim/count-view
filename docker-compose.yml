version : "3"
services : 
    redis:
        container_name : cache
        image: redis
        expose:
            - 6379
    count-view:
        image: 'docker-node-mongo'
        container_name : count-view
        build: ./
        volumes:
        - ./:/usr/src/app
        ports:
        - '5000:5000'
        environment:
        - REDIS_URL=redis://redis:6379
        links :
        - redis:redis
        command:
            sh -c 'npm i && nodemon --legacy-watch app.js'